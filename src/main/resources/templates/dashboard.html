<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('대시보드 - APIsis')}">
</head>
<body class="light-mode">
    <!-- 사이드바 -->
    <aside th:replace="~{fragments/layout :: sidebar}"></aside>

    <!-- 오버레이 (모바일용) -->
    <div th:replace="~{fragments/layout :: overlay}"></div>

    <!-- 메인 콘텐츠 -->
    <div class="main-content">
        <!-- 모바일 헤더 -->
        <header th:replace="~{fragments/layout :: header}"></header>

        <!-- 콘텐츠 래퍼 -->
        <div class="content-wrapper">
            <!-- 환영 섹션 -->
            <div class="page-header mb-4">
                <h1 class="page-title">
                    <span th:text="${user != null ? user.name : 'User'}">User</span>님, 환영합니다! 🌴
                </h1>
                <p class="page-subtitle">API 키를 생성하고 관리하세요</p>
            </div>

            <!-- 통계 카드 -->
            <div class="grid grid-cols-4 mb-4">
                <div class="card">
                    <div class="flex items-center gap-3">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                            🔑
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: 700; color: #333;">0</div>
                            <div style="font-size: 14px; color: #999;">API 키</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="flex items-center gap-3">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #40E0D0, #1ABC9C); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                            📊
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: 700; color: #333;">0</div>
                            <div style="font-size: 14px; color: #999;">API 호출</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="flex items-center gap-3">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #f093fb, #f5576c); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                            ⚡
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: 700; color: #333;">0ms</div>
                            <div style="font-size: 14px; color: #999;">평균 응답</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="flex items-center gap-3">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #fa709a, #fee140); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                            ✅
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: 700; color: #333;">100%</div>
                            <div style="font-size: 14px; color: #999;">성공률</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- API 키 관리 섹션 -->
            <div class="page-container">
                <div class="card-header">
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 class="card-title">API 키 관리</h2>
                            <p class="card-subtitle">생성된 API 키를 확인하고 관리하세요</p>
                        </div>
                        <button class="btn-primary" onclick="showCreateModal()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px;">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            <span>새 API 키 생성</span>
                        </button>
                    </div>
                </div>

                <div id="apiKeyList" class="api-key-list mt-3">
                    <!-- API 키 목록이 여기에 동적으로 로드됩니다 -->
                    <div class="empty-state">
                        <div class="empty-icon">🔑</div>
                        <p style="font-size: 18px; font-weight: 600; color: #666; margin-bottom: 8px;">
                            아직 생성된 API 키가 없습니다
                        </p>
                        <p class="empty-subtitle" style="font-size: 14px; color: #999;">
                            첫 번째 API 키를 생성해보세요!
                        </p>
                    </div>
                </div>
            </div>

            <!-- 빠른 링크 섹션 -->
            <div class="grid grid-cols-4 mt-4">
                <div class="card">
                    <div class="info-icon" style="font-size: 48px; margin-bottom: 16px;">🏜️</div>
                    <h3 class="card-title">소개</h3>
                    <p style="color: #666; margin-bottom: 16px; font-size: 14px; line-height: 1.6;">
                        APIsis 서비스 소개와 주요 기능을 확인하세요
                    </p>
                    <a href="/" class="info-link" style="color: #40E0D0; text-decoration: none; font-weight: 600;">
                        소개 보기 →
                    </a>
                </div>
                <div class="card">
                    <div class="info-icon" style="font-size: 48px; margin-bottom: 16px;">📚</div>
                    <h3 class="card-title">API 문서</h3>
                    <p style="color: #666; margin-bottom: 16px; font-size: 14px; line-height: 1.6;">
                        사용 가능한 모든 API 엔드포인트와 사용법을 확인하세요
                    </p>
                    <a href="/docs" class="info-link" style="color: #40E0D0; text-decoration: none; font-weight: 600;">
                        문서 보기 →
                    </a>
                </div>
                <div class="card">
                    <div class="info-icon" style="font-size: 48px; margin-bottom: 16px;">💡</div>
                    <h3 class="card-title">빠른 시작</h3>
                    <p style="color: #666; margin-bottom: 16px; font-size: 14px; line-height: 1.6;">
                        5분 안에 첫 API 호출을 시작하는 방법
                    </p>
                    <a href="/quick-start" class="info-link" style="color: #40E0D0; text-decoration: none; font-weight: 600;">
                        가이드 보기 →
                    </a>
                </div>
                <div class="card">
                    <div class="info-icon" style="font-size: 48px; margin-bottom: 16px;">📊</div>
                    <h3 class="card-title">사용량 통계</h3>
                    <p style="color: #666; margin-bottom: 16px; font-size: 14px; line-height: 1.6;">
                        API 호출 현황과 통계를 실시간으로 확인하세요
                    </p>
                    <a href="/usage" class="info-link" style="color: #40E0D0; text-decoration: none; font-weight: 600;">
                        통계 보기 →
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- API 키 생성 모달 -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>새 API 키 생성</h3>
                <button class="modal-close" onclick="closeCreateModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="keyName">키 이름</label>
                    <input type="text" id="keyName" placeholder="예: My First API Key" class="form-input">
                    <small>이 API 키의 용도를 설명하는 이름을 입력하세요</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeCreateModal()">취소</button>
                <button class="btn-primary" onclick="createApiKey()">생성</button>
            </div>
        </div>
    </div>

    <!-- 스크립트 -->
    <th:block th:replace="~{fragments/layout :: scripts}"></th:block>
    <script th:src="@{/js/dashboard.js}"></script>
</body>
</html>
